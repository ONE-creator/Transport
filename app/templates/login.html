{% extends "base.html" %}

{% block style %}
<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='Semantic-UI/components/form.css') }}">
<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='Semantic-UI/components/input.css') }}">

<style type="text/css">
    body {
      background-color: #DADADA;
    }
    body > .grid {
      height: 100%;
    }
    .image {
      margin-top: -100px;
    }
    .column {
      max-width: 450px;
    }
  </style>
{% endblock %}


{% block main %}
        <div class="ui middle aligned center aligned grid">
          <div class="column">
            <h2 class="ui teal image header">
              <img src="assets/images/logo.png" class="image">
              <div class="content">
                Log-in to your account
              </div>
            </h2>
            <form class="ui large form">
              <div class="ui stacked segment">
                <div class="field">
                  <div class="ui left icon input">
                    <i class="user icon"></i>
                    <input type="text" name="phone" placeholder="请输入手机号码" id="login-phone">
                  </div>
                </div>
                <div class="field">
                  <div class="ui left icon input">
                    <i class="lock icon"></i>
                    <input type="password" name="password" placeholder="请输入密码" id="login-password">
                  </div>
                </div>
                <div class="ui fluid large teal submit button" id="login-submit">Login</div>
              </div>
        
              <div class="ui error message"></div>
        
            </form>
        
            <div class="ui message">
              New to us? <a href="#">Sign Up</a>
            </div>
          </div>
        </div>
{% endblock %}


{% block script %}
        <script>
            $("#login-submit").click(()=>{
                var phone = $("#login-phone").val()
                var password = $("#login-password").val()
                data = {
                    phone: phone
                    ,password: password
                }
                $.ajax({
                    url:"/login/"
                    ,type: "post"
                    ,dataType: "json"
                    ,data: data
                    ,success: function(res){
                        layer.msg(res.msg)
                        if(res.url !== "#"){
                          parent.location.href = res.url
                        }
                        return true;
                    } 
                    ,error: function(first, second, third){
                        console.log(first)
                        console.log(second)
                        console.log(third)
                    }
                })
            })
        </script>
{% endblock %}
